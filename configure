#!/bin/bash

ok=0

checkinclude()
{
	printf "checking for $2... "
	
	cat > check$$.c <<- EOF
		#include <$1>
		int main(){}
	EOF
	
	if ! gcc -o /dev/null check$$.c 2> /dev/null; then
		printf "\n\tYou do not seem to have $2\n"
		found=1
	else
		echo ok
		found=0
	fi

	rm check$$.c

	return $found
}

if [ $1 ]; then
	echo
	echo This script takes no arguments.
	echo
fi

if ! checkinclude libnetfilter_conntrack/libnetfilter_conntrack.h \
                  libnetfilter_conntrack ftp.netfilter.org; then
	printf "\tIt can be found at ftp.netfilter.org.  "
	printf "You will also need libnfnetlink.\n"
	ok=1
fi

if ! checkinclude libnetfilter_queue/libnetfilter_queue.h \
                  libnetfilter_queue ftp.netfilter.org; then
	printf "\tIt can be found at ftp.netfilter.org.\n"
	ok=1
fi

echo
if [[ $ok -eq 0 ]]; then
	echo Ready to compile.  Say \'make\'.
	echo
fi
